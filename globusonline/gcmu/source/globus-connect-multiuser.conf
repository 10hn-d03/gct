;----------------------------------------------------------------------------;
;                      Globus Online User Configuration
;----------------------------------------------------------------------------;
; These settings configure how to contact Globus Online when 
; creating or modifying an endpoint.
[GlobusOnline]

; GlobusOnline user name. If not set, or left at its default, then the
; value of GLOBUSONLINE_USER environment variable is used, falling back to
; prompting if it is not present.
User = %(GLOBUSONLINE_USER)s

; GlobusOnline login password. If not set, or left at its default, then the
; value of the GLOBUSONINE_PASSWORD environment variable is used, falling back
; to prompting if it is not present.
Password = %(GLOBUSONLINE_PASSWORD)s

;----------------------------------------------------------------------------;
;                    Globus Online Endpoint Configuration                    ;
;----------------------------------------------------------------------------;
; Set these if you want to add or modify the core attributes of the endpoint.
[Endpoint]

; Name of the endpoint. Can be either user#name or name, but if the former,
; the user must match [GlobusOnline] User above
; The special value %(SHORT_HOSTNAME)s will substitute the non-qualified
; portion of an ec2 instance's public hostname, falling back to the
; non-qualified hostname portion of the machine's nodename
Name = %(SHORT_HOSTNAME)s

; True or False, determining if the endpoint will be public or private.
; If not specified, this will default to False (non-public).
;; Public = False

; Default directory when users login to this endpoint (optional).
; If not specified, this will default to /~/.
;; DefaultDirectory = /~/

;----------------------------------------------------------------------------;
;                           Security Configuration                           ;
;----------------------------------------------------------------------------;
; These are the default service security settings, for services which will be
; accessed from Globus Online (GridFTP and MyProxy). 
; There can be an override in the GridFTP or MyProxy sections below. 
[Security]

; If this is true, then use the relay.globusonline.org to generate
; a random service credential so that Globus Online can access this service. 
; Otherwise, GCMU will assume the Certificate and Key have been 
; generated by some other method.
; Note that FetchCredentialsFromRelay will only work if the 
FetchCredentialsFromRelay = True

; Path to the certificate.
; If FetchCredentialsFromRelay is True, and the fetch conditions are met,
; this CertificateFile value will be overwritten. 
; If not specified, this will default to 
; /var/lib/globus-connect-multiuser/grid-security/hostcert.pem
;; CertificateFile = 
;

; Path to the private key. 
; If FetchCredentialsFromRelay is True, and the fetch conditions are met,
; this KeyFile value will be overwritten. 
; If not specified, this will default to 
; /var/lib/globus-connect-multiuser/grid-security/hostkey.pem
;; KeyFile = 

; Path to where the trusted certificate directory. The
; GlobusOnline Relay CA will be installed there, as well as the MyProxy
; trust roots if the MyProxy server is running elsewhere. 
; If not specified, this will default to
; /var/lib/globus-connect-multiuser/grid-security/certificates/
;; TrustedCertificateDirectory = 

; Authorization method. The default is MyProxyGridmapCallout
;    MyProxyGridmapCallout:
;        use an authorization callout which matches the CN of the certificate
;        signed by a MyProxy certificate to a local user account. This is
;        most useful when using the PamLogin configuration of MyProxy to
;        generate user proxies from their login credential
;    CILogon:
;        use an authorization callout which matches the ePPN extension of
;        a certificate generated by the CILogon CA to a local user account.
;        To choose the identity which is allowed to generate those credentials,
;        you must also set the CILogonIdentityProvider attribute below.
;
;; AuthorizationMethod = MyProxyGridmapCallout | CILogon
;
; The name of the identity provider (see https://www.cilogon.org/ for a list
; of valid names)
;; CILogonIdentityProvider = University of Chicago
; Path for additional grid mapping overrides. If not set, it defaults to
; /var/lib/globus-connect-multiuser/grid-security/grid-mapfile
;; GridmapFile = 

;----------------------------------------------------------------------------;
;                            GridFTP Configuration                           ;
;----------------------------------------------------------------------------;
; This section configures a GridFTP server. It can be processed on the
; GridFTP server host to generate a GridFTP configuration file, and on
; that or any other host to add a GridFTP server to an endpoint
[GridFTP]

; The URI to contact this GridFTP Server, in the form [[gsi]ftp://]host[:port]
; If not set, no gridftp server will be configured. The default pulls the
; server name from the HOSTNAME environment variable, or if it is not set,
; from the public hostname of the current machine.
Server = %(HOSTNAME)s

; DN of the GridFTP server. If not specified, use the value from the
; certificate in [Security]/CertificateFile
;; DN =

; Port range to use for incoming connections.  The format is
; "startport,endport". 
;; IncomingPortRange =

; Port range to use for outgoing connections.  The format is
; "startport,endport". 
;; OutgoingPortRange =

;Hostname or IP address of the interface to use for data connections. If not
;set will use the current control interface.
;; DataInterface =

; Restricted path configuration.
; A comma separated list of full paths that clients may access.  Each path may
; be prefixed by R and/or W, denoting read or write access, otherwise full (RW)
; access is granted.  If a given path is a directory, all contents and
; subdirectories will be given the same access.  Order of paths does not matter
; -- the permissions on the longest matching path will apply.  The special
; character '~' will be replaced by the authenticated user's home directory, or
; the -home-dir option, if used. Note that if the home directory is not
; accessible, ~ will be set to '/'.  By default all paths are allowed, and
; access control is handled by the OS.
; TODO: Should this be [Endpoint]/DefaultDirectory instead of -home-dir? 
; TODO: Isn't there a way to also do a deny in this list?
RestrictPaths =

;
; Enable sharing with GlobusOnline for this server.
; If not specified, this will default to False.
;; Sharing = True

; ------------------------
; ADVANCED SHARING OPTIONS
; ------------------------
; Set this to the DN to use for sharing. 
; If not specified, this iwll default to the Globus Online-defined 
; __transfer__ DN as shown below.
;; SharingDN = "/C=US/O=Globus Consortium/OU=Globus Connect User/CN=__transfer__"

; Using the same syntax RestrictPaths above, this defines additional 
; restrictions which paths that sharing clients may access.
;; SharingRestrictPaths = 

; Per-user sharing configuration. 
; If SharingFile is set to "none", then sharing is universally 
; enabled or disabled by the Sharing option above. 
; If SharingFile is not specified, then sharing is enabled 
; only for users who have a file ~/.globus_sharing. 
; If SharingFile is set to a value other than "none", then sharing 
; is enabled only if that file exists.
; The default for this is the second case.
;
; TODO: This seems to contradict itself. If not specified, then does it
; default to none, or is sharing enabled on for user who have a file in 
; in ~/.globus_sharing.  The default should be none. So the second option 
; should be "users", or "~/.globus_sharing", or something like that.
;
; SharingFile = none

; If this is set to True, then the per-user sharing configuration 
; mentioned above can be modified using special commands that 
; bypass the normal path restrictions.
; The default for this is True
; TODO: I don't understand this one. 
;; SharingFileControl = True

;-----------------------------------------------------------------------------
;                            MyProxy Configuration                           ;
;-----------------------------------------------------------------------------
; This section configures a MyProxy server. It can be processed on the
; MyProxy server host to generate myproxy-server configuration files and
; a MyProxy CA, or can be used on a GridFTP server host to determine how
; to fetch trust roots, or to associate the MyProxy server with a
; Globus Online endpoint
[MyProxy]

; The contact URI of the MyProxy server. The format is  host[:port], with
; a default port of 7512 if not present
; In not set, then no myproxy server will be configured. The special value
; %(HOSTNAME)s will substitute an ec2 instance's public hostname, falling back
; to the machine's nodename
Server = %(HOSTNAME)s

; DN of the myproxy server. If this is not present, GCMU will use the
; DN of the [Security]/CertificateFile.
; DN = 

; Set this to True if you want to configure this MyProxy server to act as a 
; CA. Otherwise, it will only be usable as a credential repository.
; If not present, the default is True
;; CA = True

; Directory in which to place the MyProxy CA files, 
; including the cacert and key, and the set of signed certificates. 
; If not present, the default is /var/lib/globus-connect-multiuser/myproxy-ca
;
;; CaDirectory = /var/lib/globus-connect-multiuser/myproxy-ca

; MyProxy CA private key's passphrase. This is used to decrypt the
; CA key to sign temporary user credentials. This is not a secure passphrase,
; as it is included in this and other configuration files so that the 
; myproxy ca can operation independently. It is ok to omit this and have
; globus-connect-multiuser create one.
;; CaPassphrase = 

; Use the pam "login" method to authenticate users. This will force the
; myproxy server to run as root, but will allow users to generate 
; credentials using their standard login password.
; The default value is True
;; UsePamLogin = True

; Path to store the myproxy service configuration file. 
; If not specified, the default is
; /var/lib/globus-connect-multiuser/myproxy-server.conf
; 
;; ConfigFile = /var/lib/globus-connect-multiuser/myproxy-server.conf
;

;; TODO: Add OAuth section
;
; vim: filetype=dosini : nospell :
