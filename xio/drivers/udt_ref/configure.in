dnl

AC_REVISION($Revision$)
AC_INIT(Makefile.am)

GLOBUS_INIT

AM_PROG_LIBTOOL

dnl config header goes here

dnl Initialize the automake rules the last argument
AM_INIT_AUTOMAKE($GPT_NAME, $GPT_VERSION)

LAC_DOXYGEN("../", "", "$GLOBUS_LOCATION/sbin/globus-vararg-enums-doxygen-filter.pl")


GLOBUS_FINALIZE

export GLOBUS_FLAVOR=$GLOBUS_FLAVOR_NAME
cd prereq
if test ! -f done; then
    sh ./build.sh
fi
cd ..
export PKG_CONFIG_PATH=$PWD/prereq/inst/lib/pkgconfig:$PKG_CONFIG_PATH
PKG_PROG_PKG_CONFIG
PKG_CONFIG="$PKG_CONFIG --static"
PKG_CHECK_MODULES([NICE], [nice >= 0.0.9])
PKG_CHECK_MODULES([GLIB], [glib-2.0 >= 2.22.5 gthread-2.0 gio-2.0 gobject-2.0])
UDT_LIBS="-L$PWD/prereq/inst/lib -ludt"
UDT_CFLAGS="-I$PWD/prereq/inst/include"
AC_SUBST(NICE_LIBS)
AC_SUBST(NICE_CFLAGS)
AC_SUBST(GLIB_LIBS)
AC_SUBST(GLIB_CFLAGS)
AC_SUBST(UDT_LIBS)
AC_SUBST(UDT_CFLAGS)

AC_OUTPUT(
	Makefile
	pkgdata/Makefile
        doxygen/Makefile
        doxygen/Doxyfile 
        doxygen/Doxyfile-internal
	pkgdata/pkg_data_src.gpt
        version.h
)

