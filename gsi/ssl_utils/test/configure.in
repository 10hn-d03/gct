dnl
dnl

AC_INIT(gss-client.c)

AC_CHECK_HEADERS(unistd.h stdlib.h)
AC_CHECK_HEADER(string.h,AC_DEFINE(USE_STRING_H))
AC_CONST

LAC_INIT

LAC_COMPILERS_TARGET(no)

LAC_GSSAPI_SSLEAY

GSSAPI_TYPE="$globus_cv_gssapi_type"
AC_SUBST(GSSAPI_TYPE)

CLIENT_CERTDIR=${srcdir}/test-client-cert
AC_SUBST(CLIENT_CERTDIR)

SERVER_CERTDIR=${srcdir}/test-server-cert
AC_SUBST(SERVER_CERTDIR)

CA_CERTDIR=${srcdir}/test-certdir
AC_SUBST(CA_CERTDIR)

BUILD_TARGETS="gss-server gss-client"
if test "$globus_cv_nexus_enable" = "yes"; then
	BUILD_TARGETS="$BUILD_TARGETS gss-assist-client"
fi
AC_SUBST(BUILD_TARGETS)

# set-perms must come before any other test that expects the
# permissions on the client and server keys to be set correctly
TEST_SCRIPTS="set-perms.sh gssapi-auth-test.sh"
TEST_EXECS="$TEST_SCRIPTS"
AC_SUBST(TEST_EXECS)

LAC_MAKEFILES(makefile_header, Makefile)

AC_OUTPUT(Makefile run-tests $TEST_SCRIPTS $lac_makefiles
	 $lac_makefile_headers,
	 LAC_INSERT_MAKEFILE_HEADERS echo timestamp > stamp-h,
	 [lac_makefiles="$lac_makefiles"])

chmod +x run-tests

for script in $TEST_SCRIPTS ; do
	chmod +x ${script}
done




